
<form class="form-horizontal">
    <fieldset ng-controller="RxNormReview">
        <table>
            <tr>
                <td class="col-sm-6">
                    <table>
                        <tr>
                            <td>
                                <div class="control-group">
                                    <label class="control-label" for="reviewers">Reviewers:</label>
                                    <select id="reviewers" 
                                        name="reviewers" 
                                        class="dropdown-toggle" 
                                        data-toggle="dropdown" 
                                        ng-model="selection.reviewer"
                                        ng-change="initializeValues({{cuis.ind}});"
                                        onchange="changeReviewer();">
                                        <option value="">Select a reviewer</option>
                                        <option ng-repeat="mainrev in mainReviewers" 
                                            value="{{mainrev}}">{{mainrev}}</option>
                                        <option ng-repeat="guestrev in guestReviewers" 
                                            value="{{guestrev}}">{{guestrev}}</option>
                                    </select>
                                    <label ng-show="!selection.reviewer" style="color:red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please select a reviewer to continue...</label>
                                </div>
                            </td>
                            <td ng-hide="!selection.reviewer">
                                <span id="counterDisp" style="color:green;font-style:italic">
                                    &nbsp;&nbsp;Record Number&nbsp;:&nbsp;
                                    <b><a href="#" data-toggle="tooltip" title="Sequence number for RxCUIs (current session)">{{cuis.ind + 1}}</a></b>&nbsp;[&nbsp;Status:&nbsp;<u><span id="review_status" style="color:orange">{{currentReviewStatus[0].review_status}}</span></u>
                                    &nbsp;]
                                </span>
                            </td>
                            <td ng-hide="!selection.reviewer">
                                <span id="counterDisp2" style="color:green;font-style:italic">
                                &nbsp;&nbsp;Remaining&nbsp;:&nbsp;
                                <b><a href="#" data-toggle="tooltip" title="Number of 'Incomplete' RxCUIs (not including ones 'In Progress' state for review)">{{getPendingSCDs()}}</a></b>
                                </span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr><td>&nbsp;</td></tr>
            <tr ng-hide="!selection.reviewer">
                <td class="col-sm-6">
                    <fieldset ng-disabled="!selection.reviewer">
                        <table valign="top" width="100%" cellspacing="100">
                            <tr valign="top">
                                <td width="50px"><b>RxCUI:</b></td>
                                <td rowspan="2" width="50px"><b><span id="scd_rxcui" style="color:blue"><u>{{cuis.entries[cuis.ind]['SCD_rxcui']}}</u></span></b></td>
                                <td width="50px">&nbsp;&nbsp;<b>Drug(SCD)&nbsp;:&nbsp;</b></td>
                                <td style="word-wrap: break-word;" rowspan="2"><span id="scd_df" style="color:blue">{{existing[0]['SCD_str']}}</span></td>
                            </tr>
                            <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
                        </table>
                    </fieldset>
                </td>
            </tr>
            <tr ng-hide="!selection.reviewer">
                <td class="col-sm-6">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h3 class="panel-title">Exisitng&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:brown"><font size="2">{{getBreadcrumbs(-1, existing[0]['DF_str'])}}</font></span></h3>
                        </div>
                        <div class="panel-body">
                            <table width="100%">
                                <tr>
                                    <td width="100px">
                                        <div role="alert"><b>RxNorm DF:&nbsp;</b></div>
                                    </td>
                                    <td width="400px">
                                        <span style="color:blue">{{existing[0]['DF_str']}}</span>
                                    </td>
                                    <td width="100px">
                                        <div role="alert"><b>RxTndF:&nbsp;</b></div>
                                    </td>
                                    <td width="400px">
                                        <span style="color:blue">{{existing[0]['NEWDF_rxt']}}</span>
                                    </td>
                               
                                    <td width="100px">
                                        <div role="alert"><b>RxTroute:&nbsp;</b></div>
                                    </td>
                                    <td width="400px">
                                        <span style="color:blue">{{existing[0]['ROUTE_rxt']}}</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </td>
            </tr>
            <tr ng-hide="!selection.reviewer">
                <td>
                    <table>
                        <tr valign="top">
                            <td class="col-sm-2">
                                <table>
                                    <tr>
                                        <td>
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Proposed
                                                    <span class="label label-danger" ng-show="showConflict(existing[0]['conflict'])">[Conflicts found due to multiple proposed values]</span></h3>
                                                </div>
                                                <div class="panel-body">
                                                    <table width="100%">
                                                        <tr><td colspan="4"><h4><span class="label label-default">Dose Forms</span></h4></td></tr>
                                                        <tr>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[0][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop1']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[0][1]}}" style ="color:blue" class='glyphicon glyphicon-stop' 
                                                                    onClick="setSelectedProperty(this.id, 0)"></span>
                                                                <span id="OK{{propertyList[0][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[0][0]}}" type="hidden" value="{{commentList[0][1]}}" onchange="toggleColor(0)" ng-click="storeComment($event)"/>
                                                            </td>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[1][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop3']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[1][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 1)"></span>
                                                                <span id="OK{{propertyList[1][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[1][0]}}" type="hidden" value="{{commentList[1][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                        </tr>
                                                        <tr><td colspan="4">&nbsp;</td></tr>
                                                        <tr>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[2][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop2']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[2][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 2)"></span>
                                                                <span id="OK{{propertyList[2][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[2][0]}}" type="hidden" value="{{commentList[2][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[3][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop4']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[3][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 3)"></span>
                                                                <span id="OK{{propertyList[3][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[3][0]}}" type="hidden" value="{{commentList[3][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                        </tr>
                                                        <tr><td colspan="4"><h4><span class="label label-default">Administration</span></h4></td></tr>
                                                        <tr>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[4][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop5']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[4][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 4)"></span>
                                                                <span id="OK{{propertyList[4][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[4][0]}}" type="hidden" value="{{commentList[4][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[5][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop6']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[5][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 5)"></span>
                                                                <span id="OK{{propertyList[5][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[5][0]}}" type="hidden" value="{{commentList[5][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                        </tr>
                                                        <tr><td colspan="4"><h4><span class="label label-default">Delivery Device</span></h4></td></tr>
                                                        <tr>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[6][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop7']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[6][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 6)"></span>
                                                                <span id="OK{{propertyList[6][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[6][0]}}" type="hidden" value="{{commentList[6][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[9][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                    <span style="color:blue">{{existing[0]['prop9']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[9][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                    onClick="setSelectedProperty(this.id, 9)"></span>
                                                                <span id="OK{{propertyList[9][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[9][0]}}" type="hidden" value="{{commentList[9][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                        </tr>
                                                        <tr><td colspan="4">&nbsp;</td></tr>
                                                        <tr>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                    <b>{{propertyList[7][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                    <span style="color:blue">{{existing[0]['prop8']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[7][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                onClick="setSelectedProperty(this.id, 7)"></span>
                                                                <span id="OK{{propertyList[7][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[7][0]}}" type="hidden" value="{{commentList[7][1]}}" ng-click="storeComment($event)" />
                                                            </td>
                                                            <td width="45%">
                                                                <div role="alert">
                                                                <b>{{propertyList[8][1].split(":")[1].trim()}}:</b>&nbsp;&nbsp;
                                                                <span style="color:blue">{{existing[0]['prop10']}}</span>
                                                                </div>
                                                            </td>
                                                            <td width="5%">
                                                                <span id="{{propertyList[8][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                                onClick="setSelectedProperty(this.id, 8)"></span>
                                                                <span id="OK{{propertyList[8][0]}}" style ="color:green;visibility:hidden" class='glyphicon glyphicon-ok'></span>
                                                                <input id="NEW{{propertyList[8][0]}}" type="hidden" value="{{commentList[8][1]}}" ng-click="storeComment($event)" />
                                                                <input id="NEW{{propertyList[10][0]}}" type="hidden" value="{{commentList[10][1]}}" ng-click="storeComment($event)"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div> 
                                            </div>
                                        </td>
                                    </tr>
                                    <tr valign="top">
                                        <td class="col-sm-2">
                                            <div class="control-group" >
                                                <div class="controls" align="center" valign="top">
                                                    <table>
                                                        <tr valign="top">
                                                            <td>
                                                                <input id="okButtonTitle" type="hidden" value="{{reviewButtonText}}"/>
                                                            </td>
                                                            <td>
                                                                <button id="prevButton" 
                                                                        name="prevButtonName" 
                                                                        class="btn btn-primary" 
                                                                        onclick="resetOK()" 
                                                                        ng-click="getPrev(currentReviewStatus[0].review_status);" 
                                                                        ng-disabled="(cuis.ind == 0)">Previous
                                                                </button>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                            <td>
                                                                <button id="okButton" 
                                                                        name="okButtonName" 
                                                                        class="btn btn-success" 
                                                                        style="{{reviewButtonColor}}" 
                                                                        onclick="setOK()" 
                                                                        ng-disabled="(currentReviewStatus[0].review_status == 'Complete')">{{reviewButtonText}}
                                                                </button>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                            <td>
                                                                <button id="nextButton" 
                                                                        name="nextButtonName" 
                                                                        class="btn btn-primary" 
                                                                        onclick="resetOK()" 
                                                                        ng-click="getNext($event, cuis.entries[cuis.ind]['SCD_rxcui'], currentReviewStatus[0].review_status);">SKIP & Next
                                                                </button>
                                                            </td>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="col-sm-2">
                                <div class="panel panel-warning">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Comments by Reviewer:&nbsp;&nbsp;
                                                    <b><span id="currentReviewer"></span></b>
                                        </h3>
                                    </div>
                                    <div class="panel-body">
                                        <table>
                                            <tr>
                                                <td colspan="2">
                                                    <span id="{{propertyList[10][1]}}" style ="color:blue" class='glyphicon glyphicon-stop'
                                                        onClick="setSelectedProperty(this.id, 10)" data-toggle='tooltip' title="Click here to select 'General Comments' option.">
                                                    </span>
                                                    <label class="control-label" for="reviewers">&nbsp;&nbsp;Please add comments for:</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="control-group">
                                                        <select id="selectedProperty" 
                                                                name="selectedProperty" 
                                                                class="dropdown-toggle" 
                                                                data-toggle="dropdown" 
                                                                ng-model="selection.property"
                                                                onchange="changeSelectedProperty()"
                                                                ng-disabled="(currentReviewStatus[0].review_status == 'Complete')"
                                                                style="height:225px"
                                                                multiple>
                                                                <option ng-repeat="prop in propertyList" 
                                                                value="{{prop[1]}}">{{prop[1]}}</option>
                                                        </select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <textarea id="currentComment" 
                                                                ng-model="newComemnt"  
                                                                class="form-control col-xs-12"
                                                                style="height:225px;width:400px;color:black"
                                                                title="Please type comments for selected properties here..."
                                                                placeholder="Please type comments for selected properties here..."
                                                                ng-disabled="!selection.property">
                                                    </textarea>
                                                </td>
                                            </tr>
                                            <tr><td colspan="2">&nbsp;</td></tr>
                                            <tr>
                                                <td></td>
                                                <td>
                                                    <button id="addCommentButton" 
                                                            name="okButtonName" 
                                                            class="btn btn-success" 
                                                            onclick="addComment()" 
                                                            ng-disabled="(!selection.property)||(currentReviewStatus[0].review_status == 'Complete')">Save Comment
                                                    </button>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </fieldset>
</form>
